version: v1.0
name: Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Backend - Lint
    dependencies: []
    task:
      jobs:
        - name: Lint
          commands:
            - make back.lint
  - name: Backend - Tests
    dependencies:
      - Backend - Lint
    task:
      jobs:
        - name: Tests
          commands:
            - make back.tests
          parallelism: 4
  - name: Frontend - Lint
    dependencies: []
    task:
      jobs:
        - name: Lint
          commands:
            - make front.lint
  - name: Frontend - Tests
    dependencies:
      - Frontend - Lint
    task:
      jobs:
        - name: Tests
          commands:
            - make front.tests
          parallelism: 4
  - name: E2E
    dependencies:
      - Backend - Tests
      - Frontend - Tests
    task:
      jobs:
        - name: e2e
          commands:
            - make e2e
  - name: "\U0001F680 Release"
    dependencies:
      - E2E
    task:
      jobs:
        - name: release
          commands:
            - make release
